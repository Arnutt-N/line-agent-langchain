"""
Phase 1.4: р╣Ар╕Юр╕┤р╣Ир╕б Templates р╣Бр╕Ър╕Ър╕Зр╣Ир╕▓р╕в (р╣Др╕бр╣Ир╕бр╕╡ tags)
"""
import os
import sys
import io
sys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding='utf-8')
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

from app.database import SessionLocal
from app.models import MessageCategory, MessageTemplate
import json
from datetime import datetime

def add_simple_hr_templates():
    """р╣Ар╕Юр╕┤р╣Ир╕б Templates р╣Гр╕лр╕бр╣Ир╣Бр╕Ър╕Ър╕Зр╣Ир╕▓р╕в"""
    db = SessionLocal()
    try:
        # Get category IDs
        categories = {cat.name: cat.id for cat in db.query(MessageCategory).all()}
        
        # Templates р╣Гр╕лр╕бр╣Ир╕Чр╕╡р╣Ир╕Ир╕░р╣Ар╕Юр╕┤р╣Ир╕б (р╣Бр╕Ър╕Ър╕Зр╣Ир╕▓р╕в р╣Др╕бр╣Ир╕бр╕╡ tags)
        new_templates = [
            # р╕Бр╕▓р╕гр╕ер╕▓
            {
                "name": "р╕ер╕▓р╕Бр╕┤р╕Ир╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕з",
                "description": "р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕ер╕▓р╕Бр╕┤р╕Ир╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕з",
                "message_type": "text",
                "category_id": categories.get("р╕Бр╕▓р╕гр╕ер╕▓"),
                "content": {
                    "type": "text",
                    "text": "ЁЯУЛ р╕кр╕┤р╕Чр╕Шр╕┤р╕Бр╕▓р╕гр╕ер╕▓р╕Бр╕┤р╕Ир╕кр╣Ир╕зр╕Щр╕Хр╕▒р╕з:\n\nтАв р╕ер╕▓р╣Др╕Фр╣Йр╕Ыр╕╡р╕ер╕░р╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щ 45 р╕зр╕▒р╕Щр╕Чр╕│р╕Бр╕▓р╕г\nтАв р╕Ыр╕╡р╣Бр╕гр╕Бр╕Чр╕╡р╣Ир╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕бр╣Ир╕Др╕гр╕Ъ 6 р╣Ар╕Фр╕╖р╕нр╕Щ р╣Др╕бр╣Ир╕бр╕╡р╕кр╕┤р╕Чр╕Шр╕┤р╕ер╕▓р╕Бр╕┤р╕И\nтАв р╕Хр╣Йр╕нр╕Зр╕вр╕╖р╣Ир╕Щр╣Гр╕Ър╕ер╕▓р╕ер╣Ир╕зр╕Зр╕лр╕Щр╣Йр╕▓р╕нр╕вр╣Ир╕▓р╕Зр╕Щр╣Йр╕нр╕в 1 р╕зр╕▒р╕Щ\n\nЁЯУМ р╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕З: р╕гр╕░р╣Ар╕Ър╕╡р╕вр╕Ър╕Бр╕▓р╕гр╕ер╕▓р╕Вр╕нр╕Зр╕Вр╣Йр╕▓р╕гр╕▓р╕Кр╕Бр╕▓р╕г р╕Ю.р╕и. 2555"
                }
            },
            {
                "name": "р╕ер╕▓р╕Др╕ер╕нр╕Фр╕Ър╕╕р╕Хр╕г",
                "description": "р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕ер╕▓р╕Др╕ер╕нр╕Фр╕Ър╕╕р╕Хр╕г",
                "message_type": "text",
                "category_id": categories.get("р╕Бр╕▓р╕гр╕ер╕▓"),
                "content": {
                    "type": "text",
                    "text": "ЁЯС╢ р╕Бр╕▓р╕гр╕ер╕▓р╕Др╕ер╕нр╕Фр╕Ър╕╕р╕Хр╕г:\n\nтАв р╕Вр╣Йр╕▓р╕гр╕▓р╕Кр╕Бр╕▓р╕гр╕лр╕Нр╕┤р╕З: р╕ер╕▓р╣Др╕Фр╣Й 90 р╕зр╕▒р╕Щ\nтАв р╣Др╕Фр╣Йр╕гр╕▒р╕Ър╣Ар╕Зр╕┤р╕Щр╣Ар╕Фр╕╖р╕нр╕Щр╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕ер╕▓\nтАв р╕ер╕▓р╕Бр╣Ир╕нр╕Щ/р╕лр╕ер╕▒р╕Зр╕Др╕ер╕нр╕Фр╣Др╕Фр╣Й\n\nтАв р╕кр╕▓р╕бр╕╡р╕ер╕▓р╕Кр╣Ир╕зр╕вр╕ар╕гр╕гр╕вр╕▓р╕Др╕ер╕нр╕Ф: 15 р╕зр╕▒р╕Щр╕Чр╕│р╕Бр╕▓р╕г\nтАв р╣Др╕Фр╣Йр╕гр╕▒р╕Ър╣Ар╕Зр╕┤р╕Щр╣Ар╕Фр╕╖р╕нр╕Щр╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕ер╕▓"
                }
            },
            {
                "name": "р╕ер╕▓р╕нр╕╕р╕Ыр╕кр╕бр╕Ър╕Ч",
                "description": "р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Бр╕▓р╕гр╕ер╕▓р╕нр╕╕р╕Ыр╕кр╕бр╕Ър╕Ч",
                "message_type": "text",
                "category_id": categories.get("р╕Бр╕▓р╕гр╕ер╕▓"),
                "content": {
                    "type": "text",
                    "text": "тШ╕я╕П р╕кр╕┤р╕Чр╕Шр╕┤р╕Бр╕▓р╕гр╕ер╕▓р╕нр╕╕р╕Ыр╕кр╕бр╕Ър╕Ч:\n\nтАв р╕ер╕▓р╣Др╕Фр╣Йр╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щ 120 р╕зр╕▒р╕Щ\nтАв р╕Хр╣Йр╕нр╕Зр╕Чр╕│р╕Зр╕▓р╕Щр╕бр╕▓р╣Бр╕ер╣Йр╕зр╣Др╕бр╣Ир╕Щр╣Йр╕нр╕вр╕Бр╕зр╣Ир╕▓ 1 р╕Ыр╕╡\nтАв р╣Др╕Фр╣Йр╕гр╕▒р╕Ър╣Ар╕Зр╕┤р╕Щр╣Ар╕Фр╕╖р╕нр╕Щр╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕ер╕▓р╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щ 60 р╕зр╕▒р╕Щ\nтАв р╕вр╕╖р╣Ир╕Щр╣Гр╕Ър╕ер╕▓р╕ер╣Ир╕зр╕Зр╕лр╕Щр╣Йр╕▓р╣Др╕бр╣Ир╕Щр╣Йр╕нр╕вр╕Бр╕зр╣Ир╕▓ 60 р╕зр╕▒р╕Щ"
                }
            },
            # р╕кр╕зр╕▒р╕кр╕Фр╕┤р╕Бр╕▓р╕г
            {
                "name": "р╕Др╣Ир╕▓р╣Ар╕ер╣Ир╕▓р╣Ар╕гр╕╡р╕вр╕Щр╕Ър╕╕р╕Хр╕г",
                "description": "р╕кр╕┤р╕Чр╕Шр╕┤р╣Ар╕Ър╕┤р╕Бр╕Др╣Ир╕▓р╣Ар╕ер╣Ир╕▓р╣Ар╕гр╕╡р╕вр╕Щр╕Ър╕╕р╕Хр╕г",
                "message_type": "text",
                "category_id": categories.get("р╕кр╕зр╕▒р╕кр╕Фр╕┤р╕Бр╕▓р╕г"),
                "content": {
                    "type": "text",
                    "text": "ЁЯОУ р╕кр╕┤р╕Чр╕Шр╕┤р╣Ар╕Ър╕┤р╕Бр╕Др╣Ир╕▓р╣Ар╕ер╣Ир╕▓р╣Ар╕гр╕╡р╕вр╕Щр╕Ър╕╕р╕Хр╕г:\n\nтАв р╣Ар╕Ър╕┤р╕Бр╣Др╕Фр╣Йр╕Хр╕▒р╣Йр╕Зр╣Бр╕Хр╣Ир╕нр╕Щр╕╕р╕Ър╕▓р╕е - р╕Ыр╕гр╕┤р╕Нр╕Нр╕▓р╕Хр╕гр╕╡\nтАв р╕Ър╕╕р╕Хр╕гр╕Др╕Щр╕Чр╕╡р╣И 1-3 р╣Ар╕Ър╕┤р╕Бр╣Др╕Фр╣Йр╣Ар╕Хр╣Зр╕бр╕Ир╕│р╕Щр╕зр╕Щ\nтАв р╕кр╕Цр╕▓р╕Щр╕ир╕╢р╕Бр╕йр╕▓р╕Вр╕нр╕Зр╕гр╕▒р╕Р: р╣Ар╕Ър╕┤р╕Бр╣Др╕Фр╣Йр╣Ар╕Хр╣Зр╕бр╕Ир╕│р╕Щр╕зр╕Щ\nтАв р╕кр╕Цр╕▓р╕Щр╕ир╕╢р╕Бр╕йр╕▓р╣Ар╕нр╕Бр╕Кр╕Щ: р╣Ар╕Ър╕┤р╕Бр╣Др╕Фр╣Йр╕Хр╕▓р╕бр╣Ар╕Юр╕Фр╕▓р╕Щр╕Чр╕╡р╣Ир╕Бр╕│р╕лр╕Щр╕Ф\n\nЁЯТб р╕Хр╣Йр╕нр╕Зр╕вр╕╖р╣Ир╕Щр╣Ар╕Ър╕┤р╕Бр╕ар╕▓р╕вр╣Гр╕Щ 1 р╕Ыр╕╡р╕Щр╕▒р╕Ър╕Ир╕▓р╕Бр╕зр╕▒р╕Щр╣Ар╕Ыр╕┤р╕Фр╣Ар╕Чр╕нр╕б"
                }
            },
            {
                "name": "р╣Ар╕Зр╕┤р╕Щр╕Бр╕╣р╣Йр╕кр╕зр╕▒р╕кр╕Фр╕┤р╕Бр╕▓р╕г",
                "description": "р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Зр╕┤р╕Щр╕Бр╕╣р╣Йр╕кр╕зр╕▒р╕кр╕Фр╕┤р╕Бр╕▓р╕г",
                "message_type": "text",
                "category_id": categories.get("р╕кр╕зр╕▒р╕кр╕Фр╕┤р╕Бр╕▓р╕г"),
                "content": {
                    "type": "text",
                    "text": "ЁЯТ░ р╣Ар╕Зр╕┤р╕Щр╕Бр╕╣р╣Йр╕кр╕зр╕▒р╕кр╕Фр╕┤р╕Бр╕▓р╕г:\n\nтАв р╕Бр╕╣р╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕лр╕Хр╕╕р╕Йр╕╕р╕Бр╣Ар╕Йр╕┤р╕Щ: р╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щ 3 р╣Ар╕Чр╣Ир╕▓р╕Вр╕нр╕Зр╣Ар╕Зр╕┤р╕Щр╣Ар╕Фр╕╖р╕нр╕Щ\nтАв р╕Бр╕╣р╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╕Бр╕▓р╕гр╕ир╕╢р╕Бр╕йр╕▓: р╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щ 5 р╣Ар╕Чр╣Ир╕▓р╕Вр╕нр╕Зр╣Ар╕Зр╕┤р╕Щр╣Ар╕Фр╕╖р╕нр╕Щ\nтАв р╕Бр╕╣р╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╕Чр╕╡р╣Ир╕нр╕вр╕╣р╣Ир╕нр╕▓р╕ир╕▒р╕в: р╕Хр╕▓р╕бр╕лр╕ер╕▒р╕Бр╣Ар╕Бр╕Ур╕Ср╣М р╕Шр╕нр╕к.\nтАв р╕нр╕▒р╕Хр╕гр╕▓р╕Фр╕нр╕Бр╣Ар╕Ър╕╡р╣Йр╕в: р╕Хр╕▓р╕бр╕Чр╕╡р╣Ир╕Бр╕гр╕░р╕Чр╕гр╕зр╕Зр╕Бр╕▓р╕гр╕Др╕ер╕▒р╕Зр╕Бр╕│р╕лр╕Щр╕Ф\n\nЁЯУЮ р╕Хр╕┤р╕Фр╕Хр╣Ир╕н: р╕Бр╕ер╕╕р╣Ир╕бр╕кр╕зр╕▒р╕кр╕Фр╕┤р╕Бр╕▓р╕г р╣Вр╕Чр╕г.1234"
                }
            },
            {
                "name": "р╕Ыр╕гр╕░р╕Бр╕▒р╕Щр╕кр╕╕р╕Вр╕ар╕▓р╕Юр╕Бр╕ер╕╕р╣Ир╕б",
                "description": "р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ыр╕гр╕░р╕Бр╕▒р╕Щр╕кр╕╕р╕Вр╕ар╕▓р╕Юр╕Бр╕ер╕╕р╣Ир╕б",
                "message_type": "text",
                "category_id": categories.get("р╕кр╕зр╕▒р╕кр╕Фр╕┤р╕Бр╕▓р╕г"),
                "content": {
                    "type": "text",
                    "text": "ЁЯПе р╕Ыр╕гр╕░р╕Бр╕▒р╕Щр╕кр╕╕р╕Вр╕ар╕▓р╕Юр╕Бр╕ер╕╕р╣Ир╕б:\n\nтАв р╕Др╕╕р╣Йр╕бр╕Др╕гр╕нр╕Зр╕Ьр╕╣р╣Йр╕Ыр╣Ир╕зр╕вр╣Гр╕Щ: 100,000 р╕Ър╕▓р╕Ч/р╕Ыр╕╡\nтАв р╕Др╕╕р╣Йр╕бр╕Др╕гр╕нр╕Зр╕Ьр╕╣р╣Йр╕Ыр╣Ир╕зр╕вр╕Щр╕нр╕Б: 30,000 р╕Ър╕▓р╕Ч/р╕Ыр╕╡\nтАв р╕Др╕╕р╣Йр╕бр╕Др╕гр╕нр╕Зр╕Чр╕▒р╕Щр╕Хр╕Бр╕гр╕гр╕б: 5,000 р╕Ър╕▓р╕Ч/р╕Ыр╕╡\nтАв р╕Др╕╕р╣Йр╕бр╕Др╕гр╕нр╕Зр╕нр╕╕р╕Ър╕▒р╕Хр╕┤р╣Ар╕лр╕Хр╕╕: 200,000 р╕Ър╕▓р╕Ч\nтАв р╕Др╕гр╕нр╕Ър╕Др╕ер╕╕р╕б: р╕Хр╕Щр╣Ар╕нр╕З р╕Др╕╣р╣Ир╕кр╕бр╕гр╕к р╕Ър╕╕р╕Хр╕г"
                }
            },
            # р╕гр╕░р╣Ар╕Ър╕╡р╕вр╕Ъ
            {
                "name": "р╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╕гр╕▓р╕Кр╕Бр╕▓р╕г",
                "description": "р╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╕гр╕▓р╕Кр╕Бр╕▓р╕гр╕Ыр╕гр╕░р╕Ир╕│р╕Ыр╕╡",
                "message_type": "text",
                "category_id": categories.get("р╕гр╕░р╣Ар╕Ър╕╡р╕вр╕Ъ"),
                "content": {
                    "type": "text",
                    "text": "ЁЯУЕ р╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╕гр╕▓р╕Кр╕Бр╕▓р╕г р╕Ыр╕╡ 2568:\n\nтАв р╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╕Ыр╕гр╕░р╕Ир╕│: р╣Ар╕кр╕▓р╕гр╣М-р╕нр╕▓р╕Чр╕┤р╕Хр╕вр╣М\nтАв р╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╕Щр╕▒р╕Бр╕Вр╕▒р╕Хр╕др╕Бр╕йр╣М: 18 р╕зр╕▒р╕Щ\nтАв р╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╕Кр╕Фр╣Ар╕Кр╕в: р╕Хр╕▓р╕бр╕Ыр╕гр╕░р╕Бр╕▓р╕и\n\nЁЯФН р╕Фр╕╣р╕Ыр╕Пр╕┤р╕Чр╕┤р╕Щр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╣Др╕Фр╣Йр╕Чр╕╡р╣Ир╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣М HR"
                }
            },
            {
                "name": "р╕Бр╕▓р╕гр╣Бр╕Хр╣Ир╕Зр╕Бр╕▓р╕вр╕гр╕▓р╕Кр╕Бр╕▓р╕г",
                "description": "р╕гр╕░р╣Ар╕Ър╕╡р╕вр╕Ър╕Бр╕▓р╕гр╣Бр╕Хр╣Ир╕Зр╕Бр╕▓р╕в",
                "message_type": "text",
                "category_id": categories.get("р╕гр╕░р╣Ар╕Ър╕╡р╕вр╕Ъ"),
                "content": {
                    "type": "text",
                    "text": "ЁЯСФ р╕гр╕░р╣Ар╕Ър╕╡р╕вр╕Ър╕Бр╕▓р╕гр╣Бр╕Хр╣Ир╕Зр╕Бр╕▓р╕в:\n\nтАв р╕Ир╕▒р╕Щр╕Чр╕гр╣М-р╕Юр╕др╕лр╕▒р╕к: р╕Кр╕╕р╕Фр╕Вр╣Йр╕▓р╕гр╕▓р╕Кр╕Бр╕▓р╕г/р╕Кр╕╕р╕Фр╕кр╕╕р╕ар╕▓р╕Ю\nтАв р╕ир╕╕р╕Бр╕гр╣М: р╕Кр╕╕р╕Фр╕Ьр╣Йр╕▓р╣Др╕Чр╕в/р╕Ьр╣Йр╕▓р╕Юр╕╖р╣Йр╕Щр╣Ар╕бр╕╖р╕нр╕З\nтАв р╕Зр╕▓р╕Щр╕Юр╕┤р╕Шр╕╡р╕Бр╕▓р╕г: р╕Кр╕╕р╕Фр╕Ыр╕Бр╕Хр╕┤р╕Вр╕▓р╕з/р╕Кр╕╕р╕Фр╕Бр╕▓р╕Бр╕╡\n\nтЪая╕П р╕лр╣Йр╕▓р╕б: р╕Бр╕▓р╕Зр╣Ар╕Бр╕Зр╕вр╕╡р╕Щр╕кр╣М, р╕гр╕нр╕Зр╣Ар╕Чр╣Йр╕▓р╣Бр╕Хр╕░, р╣Ар╕кр╕╖р╣Йр╕нр╕вр╕╖р╕Ф"
                }
            },
            # р╕Чр╕▒р╣Ир╕зр╣Др╕Ы
            {
                "name": "р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Бр╕Ър╕Ър╕Яр╕нр╕гр╣Мр╕б",
                "description": "р╕ер╕┤р╕Зр╕Бр╣Мр╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Бр╕Ър╕Ър╕Яр╕нр╕гр╣Мр╕б HR",
                "message_type": "text",
                "category_id": categories.get("р╕Чр╕▒р╣Ир╕зр╣Др╕Ы"),
                "content": {
                    "type": "text",
                    "text": "ЁЯУе р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Бр╕Ър╕Ър╕Яр╕нр╕гр╣Мр╕б HR:\n\nЁЯУД р╣Бр╕Ър╕Ър╕Яр╕нр╕гр╣Мр╕бр╕ер╕▓:\nhr.moj.go.th/forms/leave\n\nЁЯУД р╣Бр╕Ър╕Ър╕Вр╕нр╕кр╕зр╕▒р╕кр╕Фр╕┤р╕Бр╕▓р╕г:\nhr.moj.go.th/forms/welfare\n\nЁЯУД р╣Бр╕Ър╕Ър╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щ:\nhr.moj.go.th/forms/evaluation"
                }
            },
            {
                "name": "р╕зр╕┤р╕Шр╕╡р╣Ар╕Кр╣Зр╕Др╕зр╕▒р╕Щр╕ер╕▓",
                "description": "р╕зр╕┤р╕Шр╕╡р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╕▒р╕Щр╕ер╕▓р╕Др╕Зр╣Ар╕лр╕ер╕╖р╕н",
                "message_type": "text",
                "category_id": categories.get("р╕Чр╕▒р╣Ир╕зр╣Др╕Ы"),
                "content": {
                    "type": "text",
                    "text": "ЁЯФН р╕зр╕┤р╕Шр╕╡р╣Ар╕Кр╣Зр╕Др╕зр╕▒р╕Щр╕ер╕▓р╕Др╕Зр╣Ар╕лр╕ер╕╖р╕н:\n\n1. р╕Ьр╣Ир╕▓р╕Щ LINE: р╕Юр╕┤р╕бр╕Юр╣М 'р╣Ар╕Кр╣Зр╕Др╕зр╕▒р╕Щр╕ер╕▓' р╕Хр╕▓р╕бр╕Фр╣Йр╕зр╕вр╕гр╕лр╕▒р╕кр╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щ\n   р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: р╣Ар╕Кр╣Зр╕Др╕зр╕▒р╕Щр╕ер╕▓ MOJ001\n\n2. р╕Ьр╣Ир╕▓р╕Щр╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣М: hr.moj.go.th\n   Login р╕Фр╣Йр╕зр╕в Username/Password\n\n3. р╕Хр╕┤р╕Фр╕Хр╣Ир╕н HR р╣Вр╕Фр╕вр╕Хр╕гр╕З: р╣Вр╕Чр╕г.1234"
                }
            }
        ]
        
        # р╣Ар╕Юр╕┤р╣Ир╕б templates
        added_count = 0
        for template_data in new_templates:
            # р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡ template р╕Щр╕╡р╣Йр╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕зр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
            existing = db.query(MessageTemplate).filter(
                MessageTemplate.name == template_data["name"]
            ).first()
            
            if not existing and template_data["category_id"]:
                new_template = MessageTemplate(
                    name=template_data["name"],
                    description=template_data["description"],
                    message_type=template_data["message_type"],
                    category_id=template_data["category_id"],
                    content=json.dumps(template_data["content"], ensure_ascii=False),
                    is_active=True,
                    created_at=datetime.now()
                )
                db.add(new_template)
                added_count += 1
                print(f"тЬЕ р╣Ар╕Юр╕┤р╣Ир╕б: {template_data['name']}")
            elif existing:
                print(f"тЪая╕П р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з: {template_data['name']}")
        
        db.commit()
        print(f"\nтЬЕ р╣Ар╕Юр╕┤р╣Ир╕б Templates р╣Гр╕лр╕бр╣И: {added_count} templates")
        
        # р╕Щр╕▒р╕Ъ templates р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
        total = db.query(MessageTemplate).count()
        print(f"ЁЯУК Templates р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф: {total} templates")
        
        return added_count
    except Exception as e:
        print(f"тЭМ Error: {e}")
        db.rollback()
        return 0
    finally:
        db.close()

def main():
    print("ЁЯУЭ Phase 1.4: р╣Ар╕Юр╕┤р╣Ир╕б Templates р╣Бр╕Ър╕Ър╕Зр╣Ир╕▓р╕в")
    print("="*60)
    
    # р╣Ар╕Юр╕┤р╣Ир╕б templates
    added = add_simple_hr_templates()
    
    if added > 0:
        print("\nтЬЕ Phase 1.4 р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М!")
    else:
        print("\nтЪая╕П р╣Др╕бр╣Ир╕бр╕╡ Templates р╣Гр╕лр╕бр╣Ир╕Чр╕╡р╣Ир╣Ар╕Юр╕┤р╣Ир╕б")

if __name__ == "__main__":
    main()
